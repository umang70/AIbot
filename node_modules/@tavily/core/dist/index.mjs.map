{"version":3,"sources":["../src/search.ts","../src/utils.ts","../src/extract.ts","../src/crawl.ts","../src/map.ts","../src/research.ts","../src/client.ts"],"sourcesContent":["import { AxiosError, AxiosResponse } from \"axios\";\nimport {\n  TavilySearchOptions,\n  TavilySearchFuncton,\n  TavilyQNASearchFuncton,\n  TavilyContextSearchFuncton,\n  TavilyProxyOptions,\n} from \"./types\";\nimport {\n  post,\n  DEFAULT_MAX_TOKENS,\n  getMaxTokensFromList,\n  DEFAULT_CHUNKS_PER_SOURCE,\n  handleRequestError,\n  handleTimeoutError,\n} from \"./utils\";\n\nexport function _search(\n  apiKey: string,\n  proxies?: TavilyProxyOptions,\n  apiBaseURL?: string\n): TavilySearchFuncton {\n  return async function search(\n    query: string,\n    options: Partial<TavilySearchOptions> = {}\n  ) {\n    const {\n      searchDepth,\n      topic,\n      days,\n      maxResults,\n      includeImages,\n      includeImageDescriptions,\n      includeAnswer,\n      includeRawContent,\n      includeDomains,\n      excludeDomains,\n      timeRange,\n      chunksPerSource,\n      country,\n      startDate,\n      endDate,\n      autoParameters,\n      timeout,\n      includeFavicon,\n      ...kwargs\n    } = options;\n\n    const requestTimeout = timeout ?? 60; // Default to 60s\n\n    try {\n      const response = await post(\n        \"search\",\n        {\n          query,\n          search_depth: searchDepth,\n          topic: topic,\n          days: days,\n          max_results: maxResults,\n          include_images: includeImages,\n          include_image_descriptions: includeImageDescriptions,\n          include_answer: includeAnswer,\n          include_raw_content: includeRawContent,\n          include_domains: includeDomains,\n          exclude_domains: excludeDomains,\n          time_range: timeRange,\n          chunks_per_source: chunksPerSource,\n          country: country,\n          start_date: startDate,\n          end_date: endDate,\n          auto_parameters: autoParameters,\n          include_favicon: includeFavicon,\n          ...kwargs,\n        },\n        apiKey,\n        proxies,\n        requestTimeout,\n        apiBaseURL\n      );\n\n      return {\n        query,\n        responseTime: response.data.response_time,\n        images: response.data.images.map((image: any) => {\n          return {\n            url: image?.url || image,\n            description: image.description,\n          };\n        }),\n        results: response.data.results.map((result: any) => {\n          return {\n            title: result.title,\n            url: result.url,\n            content: result.content,\n            rawContent: result.raw_content,\n            score: result.score,\n            publishedDate: result.published_date,\n            favicon: result.favicon,\n          };\n        }),\n        answer: response.data.answer,\n        requestId: response.data.request_id,\n        ...(response.data.auto_parameters && {\n          autoParameters: {\n            includeDomains: response.data.auto_parameters?.include_domains,\n            excludeDomains: response.data.auto_parameters?.exclude_domains,\n            topic: response.data.auto_parameters?.topic,\n            timeRange: response.data.auto_parameters?.time_range,\n            searchDepth: response.data.auto_parameters?.search_depth,\n          },\n        }),\n      };\n    } catch (err) {\n      if (err instanceof AxiosError) {\n        if (err.code === \"ECONNABORTED\") {\n          handleTimeoutError(requestTimeout);\n        }\n        if (err.response) {\n          handleRequestError(err.response as AxiosResponse);\n        }\n      }\n      throw new Error(\n        `An unexpected error occurred while making the request. Error: ${err}`\n      );\n    }\n  };\n}\n\nexport function _searchQNA(\n  apiKey: string,\n  proxies?: TavilyProxyOptions,\n  apiBaseURL?: string\n): TavilyQNASearchFuncton {\n  return async function searchQNA(\n    query: string,\n    options: TavilySearchOptions = {}\n  ) {\n    const requestTimeout = options?.timeout ?? 60; // Default to 60s\n\n    try {\n      const response = await post(\n        \"search\",\n        {\n          query,\n          search_depth: options.searchDepth ?? \"advanced\",\n          topic: options.topic,\n          days: options.days,\n          max_results: options.maxResults,\n          include_answer: true,\n          include_domains: options.includeDomains,\n          exclude_domains: options.excludeDomains,\n          chunks_per_source: options.chunksPerSource,\n          include_favicon: options.includeFavicon,\n        },\n        apiKey,\n        proxies,\n        requestTimeout,\n        apiBaseURL\n      );\n\n      const answer = response.data.answer;\n\n      return answer;\n    } catch (err) {\n      if (err instanceof AxiosError) {\n        if (err.code === \"ECONNABORTED\") {\n          handleTimeoutError(requestTimeout);\n        }\n        if (err.response) {\n          handleRequestError(err.response as AxiosResponse);\n        }\n      }\n      throw new Error(\n        `An unexpected error occurred while making the request. Error: ${err}`\n      );\n    }\n  };\n}\n\nexport function _searchContext(\n  apiKey: string,\n  proxies?: TavilyProxyOptions,\n  apiBaseURL?: string\n): TavilyContextSearchFuncton {\n  return async function searchContext(\n    query: string,\n    options: TavilySearchOptions = {}\n  ) {\n    const timeout = options?.timeout ?? 60; // Default to 60s\n\n    try {\n      const response = await post(\n        \"search\",\n        {\n          query,\n          search_depth: options.searchDepth,\n          topic: options.topic,\n          days: options.days,\n          max_results: options.maxResults,\n          include_domains: options.includeDomains,\n          exclude_domains: options.excludeDomains,\n          chunks_per_source: options.chunksPerSource,\n          include_favicon: options.includeFavicon,\n        },\n        apiKey,\n        proxies,\n        timeout,\n        apiBaseURL\n      );\n\n      const sources = response.data?.results || [];\n\n      const context = sources.map((source: any) => {\n        return {\n          url: source.url,\n          content: source.content,\n        };\n      });\n\n      return JSON.stringify(\n        getMaxTokensFromList(context, options.maxTokens ?? DEFAULT_MAX_TOKENS)\n      );\n    } catch (err) {\n      if (err instanceof AxiosError) {\n        if (err.code === \"ECONNABORTED\") {\n          handleTimeoutError(timeout);\n        }\n        if (err.response) {\n          handleRequestError(err.response as AxiosResponse);\n        }\n      }\n      throw new Error(\n        `An unexpected error occurred while making the request. Error: ${err}`\n      );\n    }\n  };\n}\n","import axios, { AxiosRequestConfig, AxiosResponse } from \"axios\";\nimport { encodingForModel, TiktokenModel } from \"js-tiktoken\";\nimport { TavilyProxyOptions } from \"./types\";\nimport { HttpsProxyAgent } from \"https-proxy-agent\";\n\nconst BASE_URL = \"https://api.tavily.com\";\nconst DEFAULT_MODEL_ENCODING = \"gpt-3.5-turbo\";\nexport const DEFAULT_MAX_TOKENS = 4000;\nexport const DEFAULT_CHUNKS_PER_SOURCE = 3;\n\ntype TavilyErrorData = {\n  detail: { error: string };\n};\n\nexport async function post(\n  endpoint: string,\n  body: any,\n  apiKey: string,\n  proxies?: TavilyProxyOptions,\n  timeout?: number,\n  apiBaseURL?: string,\n  responseType?: AxiosRequestConfig['responseType']\n): Promise<AxiosResponse> {\n  const requestTimeout = endpoint === \"research\" ? timeout : timeout ?? 60; // Research endpoint has no default timeout\n\n  const url = `${apiBaseURL || BASE_URL}/${endpoint}`;\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    Authorization: `Bearer ${apiKey}`,\n    \"X-Client-Source\": \"tavily-js\",\n  };\n\n  const config: AxiosRequestConfig = { headers };\n\n  // Only set timeout if provided\n  if (requestTimeout !== undefined) {\n    const timeoutInMillis = requestTimeout * 1000;\n    config.timeout = timeoutInMillis;\n  }\n\n  if (proxies) {\n    if (proxies.http) {\n      config.httpAgent = new HttpsProxyAgent(proxies.http);\n    }\n    if (proxies.https) {\n      config.httpsAgent = new HttpsProxyAgent(proxies.https);\n    }\n  }\n\n  if (responseType) {\n    config.responseType = responseType;\n  }\n\n  return axios.post(url, body, config);\n}\n\nexport async function get(\n  endpoint: string,\n  apiKey: string,\n  proxies?: TavilyProxyOptions,\n  timeout?: number,\n  apiBaseURL?: string\n): Promise<AxiosResponse> {\n  const url = `${apiBaseURL || BASE_URL}/${endpoint}`;\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    Authorization: `Bearer ${apiKey}`,\n    \"X-Client-Source\": \"tavily-js\",\n  };\n\n  const requestTimeout = endpoint.includes(\"research\") ? timeout : timeout ?? 60; // Research endpoint has no default timeout\n  const timeoutInMillis = requestTimeout ? requestTimeout * 1000 : undefined;\n\n  const config: AxiosRequestConfig = { headers, timeout: timeoutInMillis };\n  if (proxies) {\n    if (proxies.http) {\n      config.httpAgent = new HttpsProxyAgent(proxies.http);\n    }\n    if (proxies.https) {\n      config.httpsAgent = new HttpsProxyAgent(proxies.https);\n    }\n  }\n  return axios.get(url, config);\n}\n\nfunction getTotalTokensFromString(\n  str: string,\n  encodingName: TiktokenModel = DEFAULT_MODEL_ENCODING\n) {\n  const encoding = encodingForModel(encodingName);\n  return encoding.encode(str).length;\n}\n\nexport function getMaxTokensFromList(\n  data: Array<any>,\n  maxTokens: number = DEFAULT_MAX_TOKENS\n): string {\n  var result = [];\n  let currentTokens = 0;\n  for (let item of data) {\n    let itemString = JSON.stringify(item);\n    let newTotalTokens = currentTokens + getTotalTokensFromString(itemString);\n    if (newTotalTokens > maxTokens) {\n      break;\n    }\n    result.push(item);\n    currentTokens = newTotalTokens;\n  }\n  return JSON.stringify(result);\n}\n\nexport function handleRequestError(res: AxiosResponse): never {\n  const status = res.status;\n  const message = (res.data as TavilyErrorData)?.detail?.error;\n\n  if (!message) {\n    throw new Error(`${status} Error: ${JSON.stringify(res.data)}`);\n  }\n\n  throw new Error(`${(res.data as TavilyErrorData)?.detail?.error}`);\n}\n\nexport function handleTimeoutError(timeout: number): never {\n  throw new Error(`Request timed out after ${timeout} seconds.`);\n}\n","import { AxiosError, AxiosResponse } from \"axios\";\nimport {\n  TavilyExtractOptions,\n  TavilyExtractFunction,\n  TavilyProxyOptions,\n} from \"./types\";\nimport { handleRequestError, handleTimeoutError, post } from \"./utils\";\n\nexport function _extract(\n  apiKey: string,\n  proxies?: TavilyProxyOptions,\n  apiBaseURL?: string\n): TavilyExtractFunction {\n  return async function extract(\n    urls: Array<string>,\n    options: Partial<TavilyExtractOptions> = {}\n  ) {\n    const { includeImages, extractDepth, format, timeout, includeFavicon, ...kwargs } = options;\n\n    const requestTimeout = timeout ?? 30; // Default to 30s\n\n    try {\n      const response = await post(\n        \"extract\",\n        {\n          urls,\n          include_images: includeImages,\n          extract_depth: extractDepth,\n          format,\n          include_favicon: includeFavicon,\n          timeout, // Add timeout to the payload\n          ...kwargs,\n        },\n        apiKey,\n        proxies,\n        requestTimeout,\n        apiBaseURL\n      );\n\n      return {\n        responseTime: response.data.response_time,\n        results: response.data.results.map((result: any) => {\n          return {\n            url: result.url,\n            rawContent: result.raw_content,\n            images: result.images,\n            favicon: result.favicon,\n          };\n        }),\n        failedResults: response.data.failed_results.map((result: any) => {\n          return {\n            url: result.url,\n            error: result.error,\n          };\n        }),\n        requestId: response.data.request_id,\n      };\n    } catch (err) {\n      if (err instanceof AxiosError) {\n        if (err.code === \"ECONNABORTED\") {\n          handleTimeoutError(requestTimeout);\n        }\n        if (err.response) {\n          handleRequestError(err.response as AxiosResponse);\n        }\n      }\n      throw new Error(\n        `An unexpected error occurred while making the request. Error: ${err}`\n      );\n    }\n  };\n}\n","import {\n  TavilyCrawlOptions,\n  TavilyCrawlFunction,\n  TavilyProxyOptions,\n} from \"./types\";\nimport { post, handleRequestError, handleTimeoutError } from \"./utils\";\nimport { AxiosError, AxiosResponse } from \"axios\";\n\nexport function _crawl(\n  apiKey: string,\n  proxies?: TavilyProxyOptions,\n  apiBaseURL?: string\n): TavilyCrawlFunction {\n  return async function crawl(\n    url: string,\n    options: Partial<TavilyCrawlOptions> = {}\n  ) {\n    const {\n      maxDepth,\n      maxBreadth,\n      limit,\n      extractDepth,\n      selectPaths,\n      selectDomains,\n      excludePaths,\n      excludeDomains,\n      allowExternal,\n      includeImages,\n      instructions,\n      format,\n      timeout,\n      includeFavicon,\n      ...kwargs\n    } = options;\n\n    const requestTimeout = timeout ?? 150; // Default to 150s\n\n    try {\n      const response = await post(\n        \"crawl\",\n        {\n          url: url,\n          max_depth: maxDepth,\n          max_breadth: maxBreadth,\n          limit,\n          extract_depth: extractDepth,\n          select_paths: selectPaths,\n          select_domains: selectDomains,\n          exclude_paths: excludePaths,\n          exclude_domains: excludeDomains,\n          allow_external: allowExternal,\n          include_images: includeImages,\n          instructions,\n          format,\n          timeout,\n          include_favicon: includeFavicon,\n          ...kwargs,\n        },\n        apiKey,\n        proxies,\n        requestTimeout,\n        apiBaseURL\n      );\n\n      return {\n        responseTime: response.data.response_time,\n        baseUrl: response.data.base_url,\n        results: response.data.results.map((item: any) => {\n          return {\n            url: item.url,\n            rawContent: item.raw_content,\n            images: item.images,\n            favicon: item.favicon,\n          };\n        }),\n        requestId: response.data.request_id,\n      };\n    } catch (err) {\n      if (err instanceof AxiosError) {\n        if (err.code === \"ECONNABORTED\") {\n          handleTimeoutError(requestTimeout);\n        }\n        if (err.response) {\n          handleRequestError(err.response as AxiosResponse);\n        }\n      }\n      throw new Error(\n        `An unexpected error occurred while making the request. Error: ${err}`\n      );\n    }\n  };\n}\n","import {\n  TavilyMapOptions,\n  TavilyMapFunction,\n  TavilyProxyOptions,\n} from \"./types\";\nimport { post, handleRequestError, handleTimeoutError } from \"./utils\";\nimport { AxiosError, AxiosResponse } from \"axios\";\n\nexport function _map(\n  apiKey: string,\n  proxies?: TavilyProxyOptions,\n  apiBaseURL?: string\n): TavilyMapFunction {\n  return async function map(\n    url: string,\n    options: Partial<TavilyMapOptions> = {}\n  ) {\n    const {\n      maxDepth,\n      maxBreadth,\n      limit,\n      selectPaths,\n      selectDomains,\n      excludePaths,\n      excludeDomains,\n      allowExternal,\n      instructions,\n      timeout,\n      ...kwargs\n    } = options;\n\n    const requestTimeout = timeout ?? 150; // Default to 150s\n\n    try {\n      const response = await post(\n        \"map\",\n        {\n          url: url,\n          max_depth: maxDepth,\n          max_breadth: maxBreadth,\n          limit,\n          select_paths: selectPaths,\n          select_domains: selectDomains,\n          exclude_paths: excludePaths,\n          exclude_domains: excludeDomains,\n          allow_external: allowExternal,\n          instructions,\n          timeout,\n          ...kwargs,\n        },\n        apiKey,\n        proxies,\n        requestTimeout,\n        apiBaseURL\n      );\n\n      return {\n        responseTime: response.data.response_time,\n        baseUrl: response.data.base_url,\n        results: response.data.results,\n        requestId: response.data.request_id,\n      };\n    } catch (err) {\n      if (err instanceof AxiosError) {\n        if (err.code === \"ECONNABORTED\") {\n          handleTimeoutError(requestTimeout);\n        }\n        if (err.response) {\n          handleRequestError(err.response as AxiosResponse);\n        }\n      }\n      throw new Error(\n        `An unexpected error occurred while making the request. Error: ${err}`\n      );\n    }\n  };\n}\n","import {\n  TavilyResearchOptions,\n  TavilyResearchFunction,\n  TavilyGetResearchFunction,\n  TavilyProxyOptions,\n  TavilyGetResearchIncompleteStatusResponse,\n  TavilyGetResearchResponse,\n} from \"./types\";\nimport { post, get, handleRequestError, handleTimeoutError } from \"./utils\";\nimport { AxiosError, AxiosResponse } from \"axios\";\nimport { Readable } from \"stream\";\n\nexport function _research(\n  apiKey: string,\n  proxies?: TavilyProxyOptions,\n  apiBaseURL?: string\n): TavilyResearchFunction {\n  return async function research(\n    input: string,\n    options: Partial<TavilyResearchOptions> = {}\n  ) {\n    const { model, outputSchema, stream, citationFormat, timeout, ...kwargs } =\n      options;\n\n    if (stream) {\n      try {\n        const response = await post(\n          \"research\",\n          {\n            input: input,\n            model,\n            output_schema: outputSchema,\n            stream: stream,\n            citation_format: citationFormat,\n            ...kwargs,\n          },\n          apiKey,\n          proxies,\n          timeout,\n          apiBaseURL,\n          \"stream\"\n        );\n\n        async function* streamGenerator(): AsyncGenerator<\n          Buffer,\n          void,\n          unknown\n        > {\n          const stream = response.data as Readable;\n          try {\n            for await (const chunk of stream) {\n              if (chunk) {\n                yield chunk;\n              }\n            }\n          } finally {\n            if (!stream.destroyed) {\n              stream.destroy();\n            }\n          }\n        }\n\n        return streamGenerator();\n      } catch (err) {\n        if (err instanceof AxiosError) {\n          if (err.code === \"ECONNABORTED\") {\n            handleTimeoutError(timeout || 0);\n          }\n          if (err.response) {\n            handleRequestError(err.response as AxiosResponse);\n          }\n        }\n        throw new Error(\n          `An unexpected error occurred while making the request. Error: ${err}`\n        );\n      }\n    } else {\n      try {\n        const response = await post(\n          \"research\",\n          {\n            input,\n            model,\n            output_schema: outputSchema,\n            stream,\n            citation_format: citationFormat,\n            ...kwargs,\n          },\n          apiKey,\n          proxies,\n          timeout,\n          apiBaseURL\n        );\n\n        return {\n          requestId: response.data.request_id,\n          createdAt: response.data.created_at,\n          status: response.data.status,\n          input: response.data.input,\n          model: response.data.model,\n          responseTime: response.data.response_time,\n        };\n      } catch (err) {\n        if (err instanceof AxiosError) {\n          if (err.code === \"ECONNABORTED\") {\n            handleTimeoutError(timeout || 0);\n          }\n          if (err.response) {\n            handleRequestError(err.response as AxiosResponse);\n          }\n        }\n        throw new Error(\n          `An unexpected error occurred while making the request. Error: ${err}`\n        );\n      }\n    }\n  };\n}\n\nexport function _getResearch(\n  apiKey: string,\n  proxies?: TavilyProxyOptions,\n  apiBaseURL?: string\n): TavilyGetResearchFunction {\n  return async function getResearch(requestId: string) {\n    const requestTimeout = 60; // Default timeout for GET requests\n\n    try {\n      const response = await get(\n        `research/${requestId}`,\n        apiKey,\n        proxies,\n        requestTimeout,\n        apiBaseURL\n      );\n      return response.data as\n        | TavilyGetResearchResponse\n        | TavilyGetResearchIncompleteStatusResponse;\n    } catch (err) {\n      if (err instanceof AxiosError) {\n        if (err.code === \"ECONNABORTED\") {\n          handleTimeoutError(requestTimeout);\n        }\n        if (err.response) {\n          handleRequestError(err.response as AxiosResponse);\n        }\n      }\n      throw new Error(\n        `An unexpected error occurred while making the request. Error: ${err}`\n      );\n    }\n  };\n}\n","import { TavilyClientOptions, TavilyClient, TavilyProxyOptions } from \"./types\";\nimport { _search, _searchQNA, _searchContext } from \"./search\";\nimport { _extract } from \"./extract\";\nimport { _crawl } from \"./crawl\";\nimport { _map } from \"./map\";\nimport { _research, _getResearch } from \"./research\";\n\nexport function tavily(options?: TavilyClientOptions): TavilyClient {\n  const apiKey = options?.apiKey || process.env.TAVILY_API_KEY;\n  const proxies = (() => {\n    const http = options?.proxies?.http || process.env.TAVILY_HTTP_PROXY;\n    const https = options?.proxies?.https || process.env.TAVILY_HTTPS_PROXY;\n\n    const result = {} as TavilyProxyOptions;\n\n    if (http) result.http = http;\n    if (https) result.https = https;\n\n    return Object.keys(result).length > 0 ? result : undefined;\n  })();\n  const apiBaseURL = options?.apiBaseURL;\n\n  if (!apiKey) {\n    throw new Error(\n      \"No API key provided. Please provide the api_key attribute or set the TAVILY_API_KEY environment variable.\"\n    );\n  }\n\n  return {\n    search: _search(apiKey, proxies, apiBaseURL),\n    extract: _extract(apiKey, proxies, apiBaseURL),\n    searchQNA: _searchQNA(apiKey, proxies, apiBaseURL),\n    searchContext: _searchContext(apiKey, proxies, apiBaseURL),\n    crawl: _crawl(apiKey, proxies, apiBaseURL),\n    map: _map(apiKey, proxies, apiBaseURL),\n    research: _research(apiKey, proxies, apiBaseURL),\n    getResearch: _getResearch(apiKey, proxies, apiBaseURL),\n  };\n}\n"],"mappings":"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","names":["AxiosError","AxiosError","AxiosError","AxiosError","AxiosError","AxiosError","AxiosError","stream","AxiosError"]}